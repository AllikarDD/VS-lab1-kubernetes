# ReplicaSet (–ù–∞–±–æ—Ä —Ä–µ–ø–ª–∏–∫) –≤ Kubernetes

–û—Ñ–∏—Ü–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è *ReplicaSet*: [https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/](https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/)

---

### **1. –ß—Ç–æ —Ç–∞–∫–æ–µ ReplicaSet?**

**ReplicaSet** ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä Kubernetes, –∫–æ—Ç–æ—Ä—ã–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É **—É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã—Ö Pod'–æ–≤** –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏. –ï–≥–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏:

* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∑–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ **—Ä–µ–ø–ª–∏–∫ Pod'–æ–≤** (replicas)
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **–ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å Pod'—ã** –ø—Ä–∏ –∏—Ö —É–¥–∞–ª–µ–Ω–∏–∏ –∏–ª–∏ —Å–±–æ–µ
* –û–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å **–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ/—É–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ Pod'–æ–≤)

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:**  –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Deployment**, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç ReplicaSet'–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏ –æ—Ç–∫–∞—Ç–æ–≤.

---

### **2. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ReplicaSet?**

1. –í—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç–µ:

    * **–®–∞–±–ª–æ–Ω Pod'–∞** (template)
    * **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫** (replicas)
    * **–°–µ–ª–µ–∫—Ç–æ—Ä** (selector) –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Pod'–æ–≤
2. ReplicaSet –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

    * –°–∫–æ–ª—å–∫–æ Pod'–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä—É
    * –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ –∏–ª–∏ —É–¥–∞–ª—è–µ—Ç –ª–∏—à–Ω–∏–µ Pod'—ã –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∂–µ–ª–∞–µ–º–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é

**–ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è:**

```bash
# –°–æ–∑–¥–∞–ª–∏ ReplicaSet —Å replicas=3
‚îî‚îÄ‚îÄ Pod1, Pod2, Pod3  # –í—Å–µ –∑–∞–ø—É—â–µ–Ω—ã

# –ï—Å–ª–∏ Pod2 –∞–≤–∞—Ä–∏–π–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è:
‚îî‚îÄ‚îÄ Pod1, Pod3 + –Ω–æ–≤—ã–π Pod4  # ReplicaSet —Å–æ–∑–¥–∞—Å—Ç –∑–∞–º–µ–Ω—É

# –ï—Å–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å replicas –¥–æ 2:
‚îî‚îÄ‚îÄ –ë—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –æ–¥–∏–Ω –∏–∑ Pod'–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Pod1)
```

---

### **3. –ü—Ä–∏–º–µ—Ä ReplicaSet YAML**

```yaml
apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: frontend
  labels:
    app: web
    tier: frontend
spec:
  replicas: 3  # –ñ–µ–ª–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Pod'–æ–≤
  selector:    # –°–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–∏—Å–∫–∞ —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö Pod'–æ–≤
    matchLabels:
      tier: frontend
  template:    # –®–∞–±–ª–æ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö Pod'–æ–≤
    metadata:
      labels:
        tier: frontend  # –î–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä—É!
    spec:
      containers:
      - name: nginx
        image: nginx:1.14
        ports:
        - containerPort: 80
```

---

### **4. –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç Deployment**

|–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞|ReplicaSet|Deployment|
| ------------------------------| --------------------------------------------------------------------| -----------------------------------------|
|**–û–±–Ω–æ–≤–ª–µ–Ω–∏—è**|–ù–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è|–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç rolling update|
|**–û—Ç–∫–∞—Ç—ã**|–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã|–ï—Å—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –æ—Ç–∫–∞—Ç–∞|
|**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**|–ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä|–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±|
|**–°–≤—è–∑—å**|Deployment –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ReplicaSet "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º"|–£–ø—Ä–∞–≤–ª—è–µ—Ç ReplicaSet'–∞–º–∏|

---

### **5. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã**

|–î–µ–π—Å—Ç–≤–∏–µ|–ö–æ–º–∞–Ω–¥–∞|
| ---------------------------------| ----------------|
|–°–æ–∑–¥–∞—Ç—å ReplicaSet|‚Äã`kubectl apply -f replicaset.yaml`‚Äã|
|–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å|‚Äã`kubectl get rs`‚Äã|
|–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ—Ç–∞–ª–∏|‚Äã`kubectl describe rs/frontend`‚Äã|
|–£–¥–∞–ª–∏—Ç—å|‚Äã`kubectl delete rs/frontend`‚Äã|
|–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å|‚Äã`kubectl scale rs/frontend --replicas=5`‚Äã|

---

### **6. –ö–∞–∫ ReplicaSet –Ω–∞—Ö–æ–¥–∏—Ç Pod'—ã?**

ReplicaSet –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å–µ–ª–µ–∫—Ç–æ—Ä –º–µ—Ç–æ–∫** (label selector) –¥–ª—è:

1. –ü–æ–∏—Å–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö Pod'–æ–≤, –∫–æ—Ç–æ—Ä—ã–º–∏ –æ–Ω –¥–æ–ª–∂–µ–Ω —É–ø—Ä–∞–≤–ª—è—Ç—å
2. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö Pod'–æ–≤

**–í–∞–∂–Ω–æ:**  –ú–µ—Ç–∫–∏ –≤ `template.metadata.labels`‚Äã –¥–æ–ª–∂–Ω—ã **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–ø–∞–¥–∞—Ç—å** —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–º –≤ `spec.selector`‚Äã.

---

### **7. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ReplicaSet?**

1. **–î–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç–∞—Ç–∏—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã)
2. **–í –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö**, –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –±–∞–∑–æ–≤—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–µ–ø–ª–∏–∫
3. **–î–ª—è –æ–±—É—á–µ–Ω–∏—è**, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –æ—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤

> üí° **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç:**  –í 95% —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Deployment ‚Äî –æ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ—Ç –∂–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–ª—é—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏.

---

### **8. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

* –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è stateful-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **StatefulSet**)
* –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
* –ù–µ –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å Pod'–∞–º–∏ —Å –¥—Ä—É–≥–∏–º–∏ –º–µ—Ç–∫–∞–º–∏ (—Ç–æ–ª—å–∫–æ —Ç–µ–º–∏, —á—Ç–æ —É–∫–∞–∑–∞–Ω—ã –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–µ)

---

### **9. Best Practices**

1. **–í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ** **‚Äã`selector`‚Äã**‚Äã ‚Äî –±–µ–∑ –Ω–µ–≥–æ ReplicaSet –Ω–µ —Å–º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ —Å–≤–æ–∏ Pod'—ã.
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Deployment –≤–º–µ—Å—Ç–æ "–≥–æ–ª–æ–≥–æ" ReplicaSet** ‚Äî –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ.
3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –º–µ—Ç–∫–∏** ‚Äî –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–µ –∏ —à–∞–±–ª–æ–Ω–µ Pod'–∞.
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å** —á–µ—Ä–µ–∑ `kubectl get pods -l tier=frontend`‚Äã.

---
